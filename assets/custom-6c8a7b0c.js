import{d as ue,a1 as ce,a3 as pe,M as de,al as fe,r as x,O as X,w as j,a as be,a8 as ke,l as M,f as m,H as c,v as t,P as I,F as S,aU as ge,aV as ve,k as h,y as l,z as s,Q as _e,q as b,V as k,C as $,E as O,a6 as J,G as K,I as N,aW as g,aX as xe,aY as he,a2 as Q,aZ as Y,a_ as $e,a$ as ye,T as we,J as Te,W as Ce,X as Ae,_ as Fe}from"./index-1f7c36f7.js";import{I as Ve}from"./index-590f676d.js";import{a as Be,b as Ee,c as Oe,r as qe,s as Ue}from"./index-b8105b6e.js";import{S as q}from"./selectToken-ac5cab89.js";const A=F=>(Ce("data-v-fb93a742"),F=F(),Ae(),F),Me={class:"text-14px color-#333 font-500 mb-10px"},Ie={class:"flex items-center"},Se={class:"w-20px h-20px mr-5px",alt:"",srcset:""},Ne={class:"text-14px color-#333 font-500 mb-10px mt-14px"},Le={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},He={class:"mr-5px"},Pe=A(()=>l("span",{class:"flex-1"},null,-1)),Re={class:"text-12px color-#999 font-400"},ze={class:"flex items-center"},De={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},We={class:"mr-5px"},Ge=A(()=>l("span",{class:"flex-1"},null,-1)),Xe={class:"text-12px color-#999 font-400"},je={class:"flex items-center"},Je={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},Ke={class:"mr-5px"},Qe={class:"flex items-center"},Ye={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},Ze={class:"mr-5px"},et={class:"flex items-center btn-container"},tt={class:"flex-1 inline-flex justify-center items-center"},ot=A(()=>l("span",{class:"flex-1"},"%",-1)),lt={class:"text-14px color-#333 font-500 mb-10px mt-14px"},nt={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},st={class:"mr-5px"},at=A(()=>l("span",{class:"flex-1"},null,-1)),it={class:"text-12px color-#999 font-400"},rt={class:"flex items-center"},mt={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},ut={class:"mr-5px"},ct=A(()=>l("span",{class:"flex-1"},null,-1)),pt={class:"text-12px color-#999 font-400"},dt={class:"flex items-center"},ft={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},bt={class:"mr-5px"},kt={class:"flex items-center"},gt={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},vt={class:"mr-5px"},_t={class:"flex items-center btn-container"},xt={class:"flex-1 text-center"},ht={class:"text-14px font-400 p-20px lh-20px"},$t={class:"text-center text-16px font-500 mb-20px"},yt={class:"mb-40px"},wt={class:"mb-5px"},Tt={class:"mb-5px"},Ct={class:"mb-5px"},At={class:"color-#ed6a0c"},Ft=ue({__name:"custom",setup(F){var R;const U=ce(),L=pe();let{t:V}=de();const H=new URL("/assets/icon-unknown-4090888e.svg",self.location).href;let a=fe({single_amount:"",min_copy_amount:"",total_amount:"",slippage:50,trader_address:((R=U==null?void 0:U.query)==null?void 0:R.address)||"",remark:""}),i=x({token:"",decimals:18,symbol:"",balance:0,name:""}),f=x([]),Z=X(()=>{let e=i.value.balance||0,o=new g(a.single_amount||0).lte(new g(e))&&new g(a.total_amount||0).lte(new g(e));return!e||!o?V("insufficientBalance"):""}),ee=X(()=>{let e=i.value.token,o=i.value.balance||0,r=new g(a.single_amount||0).lte(new g(o))&&new g(a.total_amount||0).lte(new g(o));return!e||!o||!r});function te(){Be().then(e=>{var o,r,u;if(f.value=(o=e||[])==null?void 0:o.map(_=>({..._,token:(_.token||xe).toLowerCase()})),(e==null?void 0:e.length)>0){let _=((u=(r=f.value)==null?void 0:r.find)==null?void 0:u.call(r,T=>/weth/i.test(T.symbol)))||f.value[0];oe(),i.value=_}console.log("my tokens",e)})}function oe(){let e=f.value.map(o=>o.token);(e==null?void 0:e.length)>0&&Ee(e).then(o=>{f.value=f.value.map((r,u)=>o[u]!==null?{...r,balance:o[u]||"0"}:{...r})})}j(()=>a.trader_address,e=>{/^0x[0-9a-f]{40}$/i.test(e)&&B()});let w=x(!1),p=x(null);function B(){let e=a.trader_address;e&&Oe(e).then(o=>{console.log("queryHasCopyTrade",o),w.value=(o==null?void 0:o.has)||!1,w.value&&(p.value=o.request)})}function le(){var o;let e=(o=p.value)==null?void 0:o.id;e&&he({title:"",message:V("confirmCancelOrder")}).then(()=>{v.value=!0,qe(e).then(r=>{console.log("removeTrade",r),r&&(Q({message:V("cancelOrderSuccessful"),position:"top"}),B())}).catch(r=>{console.log(r),Y(r)}).finally(()=>{v.value=!1})}).catch(()=>{})}let v=x(!1);function ne(){var e,o;if(!w.value){let r={trader_address:(o=(e=a==null?void 0:a.trader_address)==null?void 0:e.toLowerCase)==null?void 0:o.call(e),single_amount:a.single_amount,min_copy_amount:a.min_copy_amount,total_amount:a.total_amount,slippage:a.slippage,token:i.value.token,remark:a.remark};v.value=!0,Ue(r).then(u=>{Q({message:V("addedSuccessfully"),position:"top"}),y.value=!1,B()}).catch(u=>{console.log(u),Y(u)}).finally(()=>{v.value=!1})}}function P(e){e===0?a.slippage--:e===1&&a.slippage++}let y=x(!1);function se(){y.value=!0}let E=x({tokenAmount:"0",uAmount:"0",ethAmount:"0"});j(()=>i.value.token,()=>{i.value.token&&$e(i.value.token).then(e=>{E.value=e})});function ae(){te(),B()}return be(()=>{ae()}),(e,o)=>{const r=ye,u=we,_=Ve,T=Te,ie=ge,re=ve,me=ke("lazy");return h(),M(S,null,[m(ie,{class:"p-16px pt-20px pb-50px",onSubmit:se},{default:c(()=>{var C,z,D,W,G;return[l("div",Me,[l("div",null,s(e.$t("awesomeAddress")),1)]),m(r,{class:"input-container",modelValue:t(a).trader_address,"onUpdate:modelValue":o[0]||(o[0]=n=>t(a).trader_address=n),rules:[{required:!0,message:e.$t("plsEnterAwesomeAddress")},{pattern:/^0x[0-9a-f]{40}$/i,message:e.$t("plsEnterCorrectAddress")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("plsEnterAwesomeAddress")},{label:c(()=>{var n,d;return[l("div",Ie,[_e(l("img",Se,null,512),[[me,`https://www.avestorage.cloud/chain/${((n=t(L))==null?void 0:n.chain)||"eth"}.png`]]),l("span",null,s(((d=t(L))==null?void 0:d.chainName)||"Ethereum"),1)])]}),_:1},8,["modelValue","rules","placeholder"]),t(w)?(h(),M(S,{key:1},[l("div",lt,[l("div",null,s(e.$t("remarkOfAwesome")),1)]),m(r,{class:"input-container","model-value":((C=t(p))==null?void 0:C.remark)||"",center:"",clearable:"","input-align":"right",placeholder:e.$t("plsEnterAwesomeRemark"),disabled:""},null,8,["model-value","placeholder"]),l("div",nt,[l("span",st,s(e.$t("singleFollowOrderMinAmount")),1),m(u,{name:"question-o",class:"clickable",onClick:o[17]||(o[17]=b(n=>t(k)({message:e.$t("singleFollowOrderMinAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"}),["stop"])),color:"#999"}),at,l("span",it,s(e.$t("balance"))+": "+s(t($)(t(i).balance||0)),1)]),m(r,{class:"input-container",type:"number","model-value":(z=t(p))==null?void 0:z.min_copy_amount,center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter"),disabled:""},{label:c(()=>{var n,d;return[l("div",rt,[m(q,{tokens:t(f),token:{token:(n=t(p))==null?void 0:n.token,symbol:(d=t(p))==null?void 0:d.symbol},disabled:""},null,8,["tokens","token"])])]}),_:1},8,["model-value","placeholder"]),l("div",mt,[l("span",ut,s(e.$t("singleFollowOrderMaxAmount")),1),m(u,{name:"question-o",class:"clickable",onClick:o[18]||(o[18]=b(n=>t(k)({message:e.$t("singleFollowOrderMaxAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"}),["stop"])),color:"#999"}),ct,l("span",pt,s(e.$t("balance"))+": "+s(t($)(t(i).balance||0)),1)]),m(r,{class:"input-container",type:"number","model-value":(D=t(p))==null?void 0:D.single_amount,center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter"),disabled:""},{label:c(()=>{var n,d;return[l("div",dt,[m(q,{tokens:t(f),token:{token:(n=t(p))==null?void 0:n.token,symbol:(d=t(p))==null?void 0:d.symbol},disabled:""},null,8,["tokens","token"])])]}),_:1},8,["model-value","placeholder"]),l("div",ft,[l("span",bt,s(e.$t("followTotalAmountLimit")),1),m(u,{name:"question-o",class:"clickable",onClick:o[19]||(o[19]=b(n=>t(k)({message:e.$t("limitTotalAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"}),["stop"])),color:"#999"})]),m(r,{class:"input-container",type:"number","model-value":(W=t(p))==null?void 0:W.total_amount,rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter"),disabled:""},{label:c(()=>{var n,d;return[l("div",kt,[t(i).token?(h(),O(_,{key:0,class:"w-[20px] h-[20px] mr-5px",round:"","lazy-load":"",src:t(J)({token:(n=t(p))==null?void 0:n.token,symbol:(d=t(p))==null?void 0:d.symbol}),"error-icon":t(H)},null,8,["src","error-icon"])):K("",!0),l("span",null,s(t(i).symbol||""),1)])]}),_:1},8,["model-value","rules","placeholder"]),l("div",gt,[l("span",vt,s(e.$t("followUpPriceFluctuation")),1),m(u,{name:"question-o",class:"clickable",color:"#999",onClick:o[20]||(o[20]=b(n=>t(k)({message:e.$t("followUpPriceFluctuationTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"}),["stop"]))})]),l("div",_t,[l("div",xt,s((G=t(p))==null?void 0:G.slippage)+"%",1)])],64)):(h(),M(S,{key:0},[l("div",Ne,[l("div",null,s(e.$t("remarkOfAwesome")),1)]),m(r,{class:"input-container",modelValue:t(a).remark,"onUpdate:modelValue":o[1]||(o[1]=n=>t(a).remark=n),rules:[{required:!0,message:e.$t("plsEnterAwesomeRemark")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("plsEnterAwesomeRemark")},null,8,["modelValue","rules","placeholder"]),l("div",Le,[l("span",He,s(e.$t("singleFollowOrderMinAmount")),1),m(u,{name:"question-o",class:"clickable",onClick:o[2]||(o[2]=b(n=>t(k)({message:e.$t("singleFollowOrderMinAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"}),["stop"])),color:"#999"}),Pe,l("span",Re,s(e.$t("balance"))+": "+s(t($)(t(i).balance||0)),1)]),m(r,{class:"input-container",type:"number",modelValue:t(a).min_copy_amount,"onUpdate:modelValue":o[5]||(o[5]=n=>t(a).min_copy_amount=n),rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter")},{label:c(()=>[l("div",ze,[m(q,{tokens:t(f),token:t(i),"onUpdate:token":o[3]||(o[3]=n=>I(i)?i.value=n:i=n)},null,8,["tokens","token"])])]),button:c(()=>[l("button",{class:"text-14px color-#3F80F7 clickable",type:"button",onClick:o[4]||(o[4]=n=>t(a).min_copy_amount=t(i).balance||0)},s(e.$t("max")),1)]),_:1},8,["modelValue","rules","placeholder"]),l("div",De,[l("span",We,s(e.$t("singleFollowOrderMaxAmount")),1),m(u,{name:"question-o",class:"clickable",onClick:o[6]||(o[6]=b(n=>t(k)({message:e.$t("singleFollowOrderMaxAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"}),["stop"])),color:"#999"}),Ge,l("span",Xe,s(e.$t("balance"))+": "+s(t($)(t(i).balance||0)),1)]),m(r,{class:"input-container",type:"number",modelValue:t(a).single_amount,"onUpdate:modelValue":o[9]||(o[9]=n=>t(a).single_amount=n),rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter")},{label:c(()=>[l("div",je,[m(q,{tokens:t(f),token:t(i),"onUpdate:token":o[7]||(o[7]=n=>I(i)?i.value=n:i=n)},null,8,["tokens","token"])])]),button:c(()=>[l("button",{class:"text-14px color-#3F80F7 clickable",type:"button",onClick:o[8]||(o[8]=n=>t(a).single_amount=t(i).balance||0)},s(e.$t("max")),1)]),_:1},8,["modelValue","rules","placeholder"]),l("div",Je,[l("span",Ke,s(e.$t("followTotalAmountLimit")),1),m(u,{name:"question-o",class:"clickable",onClick:o[10]||(o[10]=b(n=>t(k)({message:e.$t("limitTotalAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"}),["stop"])),color:"#999"})]),m(r,{class:"input-container",type:"number",modelValue:t(a).total_amount,"onUpdate:modelValue":o[12]||(o[12]=n=>t(a).total_amount=n),rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter")},{label:c(()=>[l("div",Qe,[t(i).token?(h(),O(_,{key:0,class:"w-[20px] h-[20px] mr-5px",round:"","lazy-load":"",src:t(J)(t(i)),"error-icon":t(H)},null,8,["src","error-icon"])):K("",!0),l("span",null,s(t(i).symbol||""),1)])]),button:c(()=>[l("button",{class:"text-14px color-#3F80F7 clickable",type:"button",onClick:o[11]||(o[11]=n=>t(a).total_amount=t(i).balance||0)},s(e.$t("max")),1)]),_:1},8,["modelValue","rules","placeholder"]),l("div",Ye,[l("span",Ze,s(e.$t("followUpPriceFluctuation")),1),m(u,{name:"question-o",class:"clickable",color:"#999",onClick:o[13]||(o[13]=b(n=>t(k)({message:e.$t("followUpPriceFluctuationTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"}),["stop"]))})]),l("div",et,[l("button",{class:"clickable",onClick:o[14]||(o[14]=n=>P(0)),type:"button"},[m(u,{name:"minus",class:"btn-icon"})]),l("div",tt,[m(r,{style:{padding:"0",flex:"1"},modelValue:t(a).slippage,"onUpdate:modelValue":o[15]||(o[15]=n=>t(a).slippage=n),border:!1,"input-align":"right",type:"number",label:"",placeholder:"50"},null,8,["modelValue"]),ot]),l("button",{class:"clickable",onClick:o[16]||(o[16]=n=>P(1)),type:"button"},[m(u,{name:"plus",class:"btn-icon"})])])],64)),t(w)?(h(),O(T,{key:3,class:"submit-btn",type:"primary",color:"#999",block:"",loading:t(v),onClick:b(le,["stop"])},{default:c(()=>[N(s(e.$t("cancelTerminateOrder")),1)]),_:1},8,["loading","onClick"])):(h(),O(T,{key:2,class:"submit-btn",type:"primary","native-type":"submit",block:"",loading:t(v),disabled:t(ee)},{default:c(()=>[N(s(t(Z)||e.$t("followOrderImmediately")),1)]),_:1},8,["loading","disabled"]))]}),_:1}),m(re,{show:t(y),"onUpdate:show":o[21]||(o[21]=C=>I(y)?y.value=C:y=C),closeable:"",round:""},{default:c(()=>[l("div",ht,[l("h3",$t,s(e.$t("followOrderConfirm")),1),l("ul",yt,[l("li",wt,"1, "+s(e.$t("followOrderConfirmTips1")),1),l("li",Tt,"2, "+s(e.$t("followOrderConfirmTips2")),1),l("li",Ct,"3, "+s(e.$t("followOrderConfirmTips3")),1),l("li",At,"4, "+s(e.$t("followOrderConfirmTips4",{amount:t($)(t(E).tokenAmount,2),symbol:t(i).symbol,ethAmount:t($)(t(E).ethAmount,2),uAmount:t($)(t(E).uAmount,2),native:"ETH"})),1)]),m(T,{type:"primary",class:"max-h-36px",block:"",loading:t(v),onClick:b(ne,["stop"])},{default:c(()=>[N(s(e.$t("confirmAndApprove")),1)]),_:1},8,["loading","onClick"])])]),_:1},8,["show"])],64)}}});const qt=Fe(Ft,[["__scopeId","data-v-fb93a742"]]);export{qt as default};
