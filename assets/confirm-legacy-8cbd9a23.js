System.register(["./index-legacy-a6491750.js","./index-legacy-5717ace0.js","./trader-legacy-b2d9cf2e.js","./index-legacy-a1552ea1.js","./selectToken-legacy-f336db8e.js"],(function(e,t){"use strict";var l,n,o,a,s,i,c,r,u,m,p,d,f,x,b,v,g,k,y,h,w,_,$,C,T,F,A,E,O,B,U,V,q,j,S,z,I,P,H,L,R,M,W,X,Y,D,G,J,Q,Z;return{setters:[e=>{l=e.d,n=e.M,o=e.a1,a=e.r,s=e.al,i=e.O,c=e.w,r=e.a,u=e.a8,m=e.l,p=e.y,d=e.Q,f=e.v,x=e.z,b=e.q,v=e.f,g=e.H,k=e.P,y=e.aU,h=e.aV,w=e.k,_=e.x,$=e.C,C=e.V,T=e.F,F=e.E,A=e.a6,E=e.G,O=e.I,B=e.W,U=e.X,V=e.aW,q=e.aX,j=e.aY,S=e.a2,z=e.aZ,I=e.a_,P=e.T,H=e.a$,L=e.J,R=e._},e=>{M=e.I},e=>{W=e.g},e=>{X=e.g,Y=e.a,D=e.b,G=e.c,J=e.r,Q=e.s},e=>{Z=e.S}],execute:function(){var t=document.createElement("style");t.textContent=".confirm-container[data-v-ee46314e]{padding:.37333rem 0 1.33333rem}.confirm-container .card-container[data-v-ee46314e]{background-image:linear-gradient(180deg,#3C74F8 27%,#3C74F8 61%);border-radius:.16rem;padding:.32rem .37333rem}.confirm-container .input-btn[data-v-ee46314e]{border:.02667rem solid #E6E7E8;border-radius:.10667rem;height:1.06667rem;padding:0 .26667rem}.confirm-container .input-container[data-v-ee46314e]{--van-field-label-width: auto;border:.02667rem solid #E6E7E8;border-radius:.10667rem;padding:0 .26667rem;height:1.06667rem;overflow:visible}.confirm-container .input-container[data-v-ee46314e] .van-field__error-message{position:absolute;right:0;bottom:-.8rem}.confirm-container .btn-container[data-v-ee46314e]{border:.02667rem solid #E6E7E8;border-radius:.10667rem;height:1.06667rem;padding:.26667rem .42667rem;font-size:.37333rem;color:#333;letter-spacing:0;font-weight:400}.confirm-container .btn-container button[data-v-ee46314e]{display:flex;align-items:center;justify-content:center;width:.53333rem;height:.53333rem;background:#ededed;color:#9f9f9f}.confirm-container .btn-container button .btn-icon[data-v-ee46314e]{font-size:.42667rem}.confirm-container .submit-btn[data-v-ee46314e]{height:1.06667rem;border-radius:.10667rem;margin-top:2.13333rem}\n",document.head.appendChild(t);const K=e=>(B("data-v-ee46314e"),e=e(),U(),e),N={class:"confirm-container"},ee={class:"pl-16px pr-16px"},te={class:"card-container"},le={class:"flex items-center"},ne={class:"w-24px h-24px mr-5px",alt:"",srcset:""},oe={class:"text-14px color-#fff font-500"},ae=K((()=>p("span",{class:"flex-1"},null,-1))),se={class:"mt-10px"},ie={class:"text-16px font-500 color-#fff"},ce={class:"flex text-12px color-#fff opacity-50 mt-5px"},re={class:"mr-10px"},ue={class:"flex items-center justify-between mt-8px text-14px color-#fff mt-10px"},me={class:"text-12px opacity-50 mt-3px"},pe={class:"text-12px opacity-50 mt-3px"},de={class:"text-right"},fe={class:"text-12px opacity-50 mt-3px"},xe={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},be={class:"mr-5px"},ve=K((()=>p("span",{class:"flex-1"},null,-1))),ge={class:"text-12px color-#999 font-400"},ke={class:"flex items-center"},ye={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},he={class:"mr-5px"},we={class:"flex items-center"},_e={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},$e={class:"mr-5px"},Ce={class:"flex items-center btn-container"},Te={class:"flex-1 inline-flex justify-center items-center"},Fe=K((()=>p("span",{class:"flex-1"},"%",-1))),Ae={class:"flex items-center"},Ee={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},Oe={class:"mr-5px"},Be={class:"flex items-center"},Ue={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},Ve={class:"mr-5px"},qe={class:"flex items-center btn-container"},je={class:"flex-1 text-center opacity-50"},Se={class:"flex items-center justify-center text-12px color-#333 font-400 mt-36px"},ze={class:"text-14px font-400 p-20px lh-20px"},Ie={class:"text-center text-16px font-500 mb-20px"},Pe={class:"mb-40px"},He={class:"mb-5px"},Le={class:"mb-5px"},Re={class:"mb-5px"},Me={class:"color-#ed6a0c"};e("default",R(l({__name:"confirm",setup(e){let{t:t}=n();const l=new URL("/assets/icon-unknown-4090888e.svg",self.location).href;let B=o(),U=a(null);function R(){let e=B.params.id;W(e).then((e=>{console.log(e),U.value=e,function(){let e=U?.value?.address;e&&G(e).then((e=>{console.log("queryHasCopyTrade",e),Ne.value=e?.has||!1,Ne.value&&(et.value=e.request)}))}()}))}let K=s({single_amount:"",total_amount:"",slippage:50});function We(e){0===e?K.slippage--:1===e&&K.slippage++}let Xe=a(!1);function Ye(){Xe.value=!0}let De=a({token:"",decimals:18,symbol:"",balance:0,name:""}),Ge=a([]),Je=i((()=>{let e=De.value.balance||0,l=new V(K.single_amount||0).lte(new V(e))&&new V(K.total_amount||0).lte(new V(e));return e&&l?"":t("insufficientBalance")})),Qe=i((()=>{let e=De.value.token,t=De.value.balance||0,l=new V(K.single_amount||0).lte(new V(t))&&new V(K.total_amount||0).lte(new V(t));return!e||!t||!l}));function Ze(){De.value.token&&X(De.value.token,De.value.decimals).then((e=>{De.value.balance=e,Ge.value=Ge.value.map((t=>new RegExp(De.value.token,"i").test(t.token)?{...t,balance:e}:t))}))}function Ke(){Y().then((e=>{if(console.log(e),Ge.value=(e||[])?.map((e=>({...e,token:(e.token||q).toLowerCase()}))),e?.length>0){let e=Ge.value?.find?.((e=>/weth/i.test(e.symbol)))||Ge.value[0];!function(){let e=Ge.value.map((e=>e.token));e?.length>0&&D(e).then((e=>{Ge.value=Ge.value.map(((t,l)=>null!==e[l]?{...t,balance:e[l]||"0"}:{...t}))}))}(),De.value=e}console.log("my tokens",e)})).catch((e=>{console.log(e)}))}c(De,(()=>{De.value.token&&Ze()}));let Ne=a(!1),et=a(null);function tt(){let e=et.value?.id;e&&j({title:"",message:t("confirmCancelOrder")}).then((()=>{lt.value=!0,J(e).then((e=>{console.log("removeTrade",e),e&&(S({message:t("cancelOrderSuccessful"),position:"top"}),R())})).catch((e=>{console.log(e),z(e)})).finally((()=>{lt.value=!1}))})).catch((()=>{}))}let lt=a(!1);function nt(){if(!Ne.value){let e={trader_id:U.value?.id||B.params.id||"",single_amount:K.single_amount,total_amount:K.total_amount,slippage:K.slippage,token:De.value.token};lt.value=!0,Q(e).then((e=>{S({message:t("addedSuccessfully"),position:"top"}),Xe.value=!1,R()})).catch((e=>{console.log(e),z(e)})).finally((()=>{lt.value=!1}))}}c((()=>B.params.id),(()=>{B.params.id&&"TraderConfirm"===B.name&&at()}));let ot=a({tokenAmount:"0",uAmount:"0",ethAmount:"0"});function at(){U.value=null,R(),Ke(),Ze()}return c((()=>De.value.token),(()=>{De.value.token&&I(De.value.token).then((e=>{ot.value=e}))})),r((()=>{at()})),(e,t)=>{const n=P,o=H,a=M,s=L,i=y,c=h,r=u("lazy");return w(),m("div",N,[p("div",ee,[p("div",te,[p("div",le,[d(p("img",ne,null,512),[[r,f(U)?.headurl]]),p("span",oe,x(f(U)?.name||""),1),ae,p("button",{class:"text-12px color-#ffffff88 clickable",type:"button",onClick:t[0]||(t[0]=b((e=>f(_)(f(B).params.id)),["stop"]))},x(e.$t("TaMain"))+">",1)]),p("div",se,[p("div",null,[p("div",ie,x(f($)(f(U)?.earn_30_rate||0))+"%",1),p("div",ce,[p("span",re,x(e.$t("last30DaysYield")),1),p("span",null,x(e.$t("winRate"))+" "+x(f($)(f(U)?.win_rate||0))+"%",1)])])]),p("ul",ue,[p("li",null,[p("div",null,"$"+x(f($)(f(U)?.earn_copy_trade||0)),1),p("div",me,x(e.$t("followerBenefits")),1)]),p("li",null,[p("div",null,"$"+x(f($)(f(U)?.amount_copy_trade||0)),1),p("div",pe,x(e.$t("capitalScale")),1)]),p("li",de,[p("div",null,x(f($)(f(U)?.doc_count||0)),1),p("div",fe,x(e.$t("followers")),1)])])]),v(i,{onSubmit:Ye},{default:g((()=>[p("div",xe,[p("span",be,x(e.$t("limitSingleFollowOrderAmount")),1),v(n,{name:"question-o",class:"clickable",onClick:t[1]||(t[1]=b((t=>f(C)({message:e.$t("limitSingleFollowOrderAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"}),ve,p("span",ge,x(e.$t("balance"))+": "+x(f($)(f(De).balance||0)),1)]),f(Ne)?(w(),m(T,{key:1},[v(o,{class:"input-container",type:"number","model-value":f(et)?.single_amount,center:"",clearable:"","input-align":"right",disabled:""},{label:g((()=>[p("div",Ae,[v(Z,{tokens:f(Ge),token:{token:f(et)?.token,symbol:f(et)?.symbol},disabled:""},null,8,["tokens","token"])])])),_:1},8,["model-value"]),p("div",Ee,[p("span",Oe,x(e.$t("followTotalAmountLimit")),1),v(n,{name:"question-o",class:"clickable",onClick:t[12]||(t[12]=b((t=>f(C)({message:e.$t("limitTotalAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"})]),v(o,{class:"input-container",type:"number","model-value":f(et)?.total_amount,center:"",clearable:"","input-align":"right",disabled:""},{label:g((()=>[p("div",Be,[f(De).token?(w(),F(a,{key:0,class:"w-[20px] h-[20px] mr-5px",round:"","lazy-load":"",src:f(A)({token:f(et)?.token,symbol:f(et)?.symbol}),"error-icon":f(l)},null,8,["src","error-icon"])):E("",!0),p("span",null,x(f(et)?.symbol||""),1)])])),_:1},8,["model-value"]),p("div",Ue,[p("span",Ve,x(e.$t("followUpPriceFluctuation")),1),v(n,{name:"question-o",class:"clickable",color:"#999",onClick:t[13]||(t[13]=b((t=>f(C)({message:e.$t("followUpPriceFluctuationTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"]))})]),p("div",qe,[p("div",je,x(f(et)?.slippage)+"%",1)])],64)):(w(),m(T,{key:0},[v(o,{class:"input-container",type:"number",modelValue:f(K).single_amount,"onUpdate:modelValue":t[4]||(t[4]=e=>f(K).single_amount=e),rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter")},{label:g((()=>[p("div",ke,[v(Z,{tokens:f(Ge),token:f(De),"onUpdate:token":t[2]||(t[2]=e=>k(De)?De.value=e:De=e)},null,8,["tokens","token"])])])),button:g((()=>[p("button",{class:"text-14px color-#3F80F7 clickable",type:"button",onClick:t[3]||(t[3]=e=>f(K).single_amount=f(De).balance||0)},x(e.$t("max")),1)])),_:1},8,["modelValue","rules","placeholder"]),p("div",ye,[p("span",he,x(e.$t("followTotalAmountLimit")),1),v(n,{name:"question-o",class:"clickable",onClick:t[5]||(t[5]=b((t=>f(C)({message:e.$t("limitTotalAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"})]),v(o,{class:"input-container",type:"number",modelValue:f(K).total_amount,"onUpdate:modelValue":t[7]||(t[7]=e=>f(K).total_amount=e),rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter")},{label:g((()=>[p("div",we,[f(De).token?(w(),F(a,{key:0,class:"w-[20px] h-[20px] mr-5px",round:"","lazy-load":"",src:f(A)(f(De)),"error-icon":f(l)},null,8,["src","error-icon"])):E("",!0),p("span",null,x(f(De).symbol||""),1)])])),button:g((()=>[p("button",{class:"text-14px color-#3F80F7 clickable",type:"button",onClick:t[6]||(t[6]=e=>f(K).total_amount=f(De).balance||0)},x(e.$t("max")),1)])),_:1},8,["modelValue","rules","placeholder"]),p("div",_e,[p("span",$e,x(e.$t("followUpPriceFluctuation")),1),v(n,{name:"question-o",class:"clickable",color:"#999",onClick:t[8]||(t[8]=b((t=>f(C)({message:e.$t("followUpPriceFluctuationTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"]))})]),p("div",Ce,[p("button",{class:"clickable",onClick:t[9]||(t[9]=e=>We(0)),type:"button"},[v(n,{name:"minus",class:"btn-icon"})]),p("div",Te,[v(o,{style:{padding:"0",flex:"1"},modelValue:f(K).slippage,"onUpdate:modelValue":t[10]||(t[10]=e=>f(K).slippage=e),border:!1,"input-align":"right",label:"",placeholder:"50",type:"number"},null,8,["modelValue"]),Fe]),p("button",{class:"clickable",onClick:t[11]||(t[11]=e=>We(1)),type:"button"},[v(n,{name:"plus",class:"btn-icon"})])])],64)),f(Ne)?(w(),F(s,{key:3,class:"submit-btn",type:"primary",color:"#999",block:"",loading:f(lt),onClick:b(tt,["stop"])},{default:g((()=>[O(x(e.$t("cancelTerminateOrder")),1)])),_:1},8,["loading","onClick"])):(w(),F(s,{key:2,class:"submit-btn",type:"primary","native-type":"submit",block:"",loading:f(lt),disabled:f(Qe)},{default:g((()=>[O(x(f(Je)||e.$t("followOrderImmediately")),1)])),_:1},8,["loading","disabled"]))])),_:1}),p("div",Se,[p("span",null,x(e.$t("IHaveOtherAwesomeAddresses"))+", ",1),p("button",{class:"clickable text-12px color-#3F80F7",type:"button",onClick:t[14]||(t[14]=b((t=>e.$router.push({name:"TraderCustom"})),["stop"]))},x(e.$t("customCopyOrder"))+" >",1)])]),v(c,{show:f(Xe),"onUpdate:show":t[15]||(t[15]=e=>k(Xe)?Xe.value=e:Xe=e),closeable:"",round:""},{default:g((()=>[p("div",ze,[p("h3",Ie,x(e.$t("followOrderConfirm")),1),p("ul",Pe,[p("li",He,"1, "+x(e.$t("followOrderConfirmTips1")),1),p("li",Le,"2, "+x(e.$t("followOrderConfirmTips2")),1),p("li",Re,"3, "+x(e.$t("followOrderConfirmTips3")),1),p("li",Me,"4, "+x(e.$t("followOrderConfirmTips4",{amount:f($)(f(ot).tokenAmount,2),symbol:f(De).symbol,ethAmount:f($)(f(ot).ethAmount,2),uAmount:f($)(f(ot).uAmount,2),native:"ETH"})),1)]),v(s,{type:"primary",class:"max-h-36px",block:"",loading:f(lt),onClick:b(nt,["stop"])},{default:g((()=>[O(x(e.$t("confirmAndApprove")),1)])),_:1},8,["loading","onClick"])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-ee46314e"]]))}}}));
