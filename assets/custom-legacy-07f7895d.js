System.register(["./index-legacy-a6491750.js","./index-legacy-5717ace0.js","./index-legacy-a1552ea1.js","./selectToken-legacy-f336db8e.js"],(function(e,l){"use strict";var t,n,o,a,s,r,c,i,m,u,p,d,b,x,f,g,k,v,h,y,$,_,w,C,F,A,T,E,O,V,q,B,U,M,j,z,L,P,S,I,R,H,W,X,G,J,N,Q;return{setters:[e=>{t=e.d,n=e.a1,o=e.a3,a=e.M,s=e.al,r=e.r,c=e.O,i=e.w,m=e.a,u=e.a8,p=e.l,d=e.f,b=e.H,x=e.v,f=e.P,g=e.F,k=e.aU,v=e.aV,h=e.k,y=e.y,$=e.z,_=e.Q,w=e.q,C=e.V,F=e.C,A=e.E,T=e.a6,E=e.G,O=e.I,V=e.aW,q=e.aX,B=e.aY,U=e.a2,M=e.aZ,j=e.a_,z=e.a$,L=e.T,P=e.J,S=e.W,I=e.X,R=e._},e=>{H=e.I},e=>{W=e.a,X=e.b,G=e.c,J=e.r,N=e.s},e=>{Q=e.S}],execute:function(){var l=document.createElement("style");l.textContent=".input-container[data-v-fb93a742]{--van-field-label-width: auto;border:.02667rem solid #E6E7E8;border-radius:.10667rem;padding:0 .26667rem;height:1.06667rem;overflow:visible}.input-container[data-v-fb93a742] .van-field__error-message{position:absolute;right:0;bottom:-.8rem}.btn-container[data-v-fb93a742]{border:.02667rem solid #E6E7E8;border-radius:.10667rem;height:1.06667rem;padding:.26667rem .42667rem;font-size:.37333rem;color:#333;letter-spacing:0;font-weight:400}.btn-container button[data-v-fb93a742]{display:flex;align-items:center;justify-content:center;width:.53333rem;height:.53333rem;background:#ededed;color:#9f9f9f}.btn-container button .btn-icon[data-v-fb93a742]{font-size:.42667rem}.submit-btn[data-v-fb93a742]{height:1.06667rem;border-radius:.10667rem;margin-top:4rem}\n",document.head.appendChild(l);const Y=e=>(S("data-v-fb93a742"),e=e(),I(),e),Z={class:"text-14px color-#333 font-500 mb-10px"},D={class:"flex items-center"},K={class:"w-20px h-20px mr-5px",alt:"",srcset:""},ee={class:"text-14px color-#333 font-500 mb-10px mt-14px"},le={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},te={class:"mr-5px"},ne=Y((()=>y("span",{class:"flex-1"},null,-1))),oe={class:"text-12px color-#999 font-400"},ae={class:"flex items-center"},se={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},re={class:"mr-5px"},ce=Y((()=>y("span",{class:"flex-1"},null,-1))),ie={class:"text-12px color-#999 font-400"},me={class:"flex items-center"},ue={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},pe={class:"mr-5px"},de={class:"flex items-center"},be={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},xe={class:"mr-5px"},fe={class:"flex items-center btn-container"},ge={class:"flex-1 inline-flex justify-center items-center"},ke=Y((()=>y("span",{class:"flex-1"},"%",-1))),ve={class:"text-14px color-#333 font-500 mb-10px mt-14px"},he={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},ye={class:"mr-5px"},$e=Y((()=>y("span",{class:"flex-1"},null,-1))),_e={class:"text-12px color-#999 font-400"},we={class:"flex items-center"},Ce={class:"text-14px color-#333 flex items-center mt-16px mb-10px"},Fe={class:"mr-5px"},Ae=Y((()=>y("span",{class:"flex-1"},null,-1))),Te={class:"text-12px color-#999 font-400"},Ee={class:"flex items-center"},Oe={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},Ve={class:"mr-5px"},qe={class:"flex items-center"},Be={class:"text-14px color-#333 flex items-center mt-25px mb-10px"},Ue={class:"mr-5px"},Me={class:"flex items-center btn-container"},je={class:"flex-1 text-center"},ze={class:"text-14px font-400 p-20px lh-20px"},Le={class:"text-center text-16px font-500 mb-20px"},Pe={class:"mb-40px"},Se={class:"mb-5px"},Ie={class:"mb-5px"},Re={class:"mb-5px"},He={class:"color-#ed6a0c"};e("default",R(t({__name:"custom",setup(e){const l=n(),t=o();let{t:S}=a();const I=new URL("/assets/icon-unknown-4090888e.svg",self.location).href;let R=s({single_amount:"",min_copy_amount:"",total_amount:"",slippage:50,trader_address:l?.query?.address||"",remark:""}),Y=r({token:"",decimals:18,symbol:"",balance:0,name:""}),We=r([]),Xe=c((()=>{let e=Y.value.balance||0,l=new V(R.single_amount||0).lte(new V(e))&&new V(R.total_amount||0).lte(new V(e));return e&&l?"":S("insufficientBalance")})),Ge=c((()=>{let e=Y.value.token,l=Y.value.balance||0,t=new V(R.single_amount||0).lte(new V(l))&&new V(R.total_amount||0).lte(new V(l));return!e||!l||!t}));function Je(){W().then((e=>{if(We.value=(e||[])?.map((e=>({...e,token:(e.token||q).toLowerCase()}))),e?.length>0){let e=We.value?.find?.((e=>/weth/i.test(e.symbol)))||We.value[0];!function(){let e=We.value.map((e=>e.token));e?.length>0&&X(e).then((e=>{We.value=We.value.map(((l,t)=>null!==e[t]?{...l,balance:e[t]||"0"}:{...l}))}))}(),Y.value=e}console.log("my tokens",e)}))}i((()=>R.trader_address),(e=>{/^0x[0-9a-f]{40}$/i.test(e)&&Ye()}));let Ne=r(!1),Qe=r(null);function Ye(){let e=R.trader_address;e&&G(e).then((e=>{console.log("queryHasCopyTrade",e),Ne.value=e?.has||!1,Ne.value&&(Qe.value=e.request)}))}function Ze(){let e=Qe.value?.id;e&&B({title:"",message:S("confirmCancelOrder")}).then((()=>{De.value=!0,J(e).then((e=>{console.log("removeTrade",e),e&&(U({message:S("cancelOrderSuccessful"),position:"top"}),Ye())})).catch((e=>{console.log(e),M(e)})).finally((()=>{De.value=!1}))})).catch((()=>{}))}let De=r(!1);function Ke(){if(!Ne.value){let e={trader_address:R?.trader_address?.toLowerCase?.(),single_amount:R.single_amount,min_copy_amount:R.min_copy_amount,total_amount:R.total_amount,slippage:R.slippage,token:Y.value.token,remark:R.remark};De.value=!0,N(e).then((e=>{U({message:S("addedSuccessfully"),position:"top"}),ll.value=!1,Ye()})).catch((e=>{console.log(e),M(e)})).finally((()=>{De.value=!1}))}}function el(e){0===e?R.slippage--:1===e&&R.slippage++}let ll=r(!1);function tl(){ll.value=!0}let nl=r({tokenAmount:"0",uAmount:"0",ethAmount:"0"});return i((()=>Y.value.token),(()=>{Y.value.token&&j(Y.value.token).then((e=>{nl.value=e}))})),m((()=>{Je(),Ye()})),(e,l)=>{const n=z,o=L,a=H,s=P,r=k,c=v,i=u("lazy");return h(),p(g,null,[d(r,{class:"p-16px pt-20px pb-50px",onSubmit:tl},{default:b((()=>[y("div",Z,[y("div",null,$(e.$t("awesomeAddress")),1)]),d(n,{class:"input-container",modelValue:x(R).trader_address,"onUpdate:modelValue":l[0]||(l[0]=e=>x(R).trader_address=e),rules:[{required:!0,message:e.$t("plsEnterAwesomeAddress")},{pattern:/^0x[0-9a-f]{40}$/i,message:e.$t("plsEnterCorrectAddress")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("plsEnterAwesomeAddress")},{label:b((()=>[y("div",D,[_(y("img",K,null,512),[[i,`https://www.avestorage.cloud/chain/${x(t)?.chain||"eth"}.png`]]),y("span",null,$(x(t)?.chainName||"Ethereum"),1)])])),_:1},8,["modelValue","rules","placeholder"]),x(Ne)?(h(),p(g,{key:1},[y("div",ve,[y("div",null,$(e.$t("remarkOfAwesome")),1)]),d(n,{class:"input-container","model-value":x(Qe)?.remark||"",center:"",clearable:"","input-align":"right",placeholder:e.$t("plsEnterAwesomeRemark"),disabled:""},null,8,["model-value","placeholder"]),y("div",he,[y("span",ye,$(e.$t("singleFollowOrderMinAmount")),1),d(o,{name:"question-o",class:"clickable",onClick:l[17]||(l[17]=w((l=>x(C)({message:e.$t("singleFollowOrderMinAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"}),$e,y("span",_e,$(e.$t("balance"))+": "+$(x(F)(x(Y).balance||0)),1)]),d(n,{class:"input-container",type:"number","model-value":x(Qe)?.min_copy_amount,center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter"),disabled:""},{label:b((()=>[y("div",we,[d(Q,{tokens:x(We),token:{token:x(Qe)?.token,symbol:x(Qe)?.symbol},disabled:""},null,8,["tokens","token"])])])),_:1},8,["model-value","placeholder"]),y("div",Ce,[y("span",Fe,$(e.$t("singleFollowOrderMaxAmount")),1),d(o,{name:"question-o",class:"clickable",onClick:l[18]||(l[18]=w((l=>x(C)({message:e.$t("singleFollowOrderMaxAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"}),Ae,y("span",Te,$(e.$t("balance"))+": "+$(x(F)(x(Y).balance||0)),1)]),d(n,{class:"input-container",type:"number","model-value":x(Qe)?.single_amount,center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter"),disabled:""},{label:b((()=>[y("div",Ee,[d(Q,{tokens:x(We),token:{token:x(Qe)?.token,symbol:x(Qe)?.symbol},disabled:""},null,8,["tokens","token"])])])),_:1},8,["model-value","placeholder"]),y("div",Oe,[y("span",Ve,$(e.$t("followTotalAmountLimit")),1),d(o,{name:"question-o",class:"clickable",onClick:l[19]||(l[19]=w((l=>x(C)({message:e.$t("limitTotalAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"})]),d(n,{class:"input-container",type:"number","model-value":x(Qe)?.total_amount,rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter"),disabled:""},{label:b((()=>[y("div",qe,[x(Y).token?(h(),A(a,{key:0,class:"w-[20px] h-[20px] mr-5px",round:"","lazy-load":"",src:x(T)({token:x(Qe)?.token,symbol:x(Qe)?.symbol}),"error-icon":x(I)},null,8,["src","error-icon"])):E("",!0),y("span",null,$(x(Y).symbol||""),1)])])),_:1},8,["model-value","rules","placeholder"]),y("div",Be,[y("span",Ue,$(e.$t("followUpPriceFluctuation")),1),d(o,{name:"question-o",class:"clickable",color:"#999",onClick:l[20]||(l[20]=w((l=>x(C)({message:e.$t("followUpPriceFluctuationTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"]))})]),y("div",Me,[y("div",je,$(x(Qe)?.slippage)+"%",1)])],64)):(h(),p(g,{key:0},[y("div",ee,[y("div",null,$(e.$t("remarkOfAwesome")),1)]),d(n,{class:"input-container",modelValue:x(R).remark,"onUpdate:modelValue":l[1]||(l[1]=e=>x(R).remark=e),rules:[{required:!0,message:e.$t("plsEnterAwesomeRemark")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("plsEnterAwesomeRemark")},null,8,["modelValue","rules","placeholder"]),y("div",le,[y("span",te,$(e.$t("singleFollowOrderMinAmount")),1),d(o,{name:"question-o",class:"clickable",onClick:l[2]||(l[2]=w((l=>x(C)({message:e.$t("singleFollowOrderMinAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"}),ne,y("span",oe,$(e.$t("balance"))+": "+$(x(F)(x(Y).balance||0)),1)]),d(n,{class:"input-container",type:"number",modelValue:x(R).min_copy_amount,"onUpdate:modelValue":l[5]||(l[5]=e=>x(R).min_copy_amount=e),rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter")},{label:b((()=>[y("div",ae,[d(Q,{tokens:x(We),token:x(Y),"onUpdate:token":l[3]||(l[3]=e=>f(Y)?Y.value=e:Y=e)},null,8,["tokens","token"])])])),button:b((()=>[y("button",{class:"text-14px color-#3F80F7 clickable",type:"button",onClick:l[4]||(l[4]=e=>x(R).min_copy_amount=x(Y).balance||0)},$(e.$t("max")),1)])),_:1},8,["modelValue","rules","placeholder"]),y("div",se,[y("span",re,$(e.$t("singleFollowOrderMaxAmount")),1),d(o,{name:"question-o",class:"clickable",onClick:l[6]||(l[6]=w((l=>x(C)({message:e.$t("singleFollowOrderMaxAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"}),ce,y("span",ie,$(e.$t("balance"))+": "+$(x(F)(x(Y).balance||0)),1)]),d(n,{class:"input-container",type:"number",modelValue:x(R).single_amount,"onUpdate:modelValue":l[9]||(l[9]=e=>x(R).single_amount=e),rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter")},{label:b((()=>[y("div",me,[d(Q,{tokens:x(We),token:x(Y),"onUpdate:token":l[7]||(l[7]=e=>f(Y)?Y.value=e:Y=e)},null,8,["tokens","token"])])])),button:b((()=>[y("button",{class:"text-14px color-#3F80F7 clickable",type:"button",onClick:l[8]||(l[8]=e=>x(R).single_amount=x(Y).balance||0)},$(e.$t("max")),1)])),_:1},8,["modelValue","rules","placeholder"]),y("div",ue,[y("span",pe,$(e.$t("followTotalAmountLimit")),1),d(o,{name:"question-o",class:"clickable",onClick:l[10]||(l[10]=w((l=>x(C)({message:e.$t("limitTotalAmountTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"])),color:"#999"})]),d(n,{class:"input-container",type:"number",modelValue:x(R).total_amount,"onUpdate:modelValue":l[12]||(l[12]=e=>x(R).total_amount=e),rules:[{required:!0,message:e.$t("pleaseEnter")}],center:"",clearable:"","input-align":"right",placeholder:e.$t("pleaseEnter")},{label:b((()=>[y("div",de,[x(Y).token?(h(),A(a,{key:0,class:"w-[20px] h-[20px] mr-5px",round:"","lazy-load":"",src:x(T)(x(Y)),"error-icon":x(I)},null,8,["src","error-icon"])):E("",!0),y("span",null,$(x(Y).symbol||""),1)])])),button:b((()=>[y("button",{class:"text-14px color-#3F80F7 clickable",type:"button",onClick:l[11]||(l[11]=e=>x(R).total_amount=x(Y).balance||0)},$(e.$t("max")),1)])),_:1},8,["modelValue","rules","placeholder"]),y("div",be,[y("span",xe,$(e.$t("followUpPriceFluctuation")),1),d(o,{name:"question-o",class:"clickable",color:"#999",onClick:l[13]||(l[13]=w((l=>x(C)({message:e.$t("followUpPriceFluctuationTips"),confirmButtonText:e.$t("confirm"),confirmButtonColor:"#3F80F7"})),["stop"]))})]),y("div",fe,[y("button",{class:"clickable",onClick:l[14]||(l[14]=e=>el(0)),type:"button"},[d(o,{name:"minus",class:"btn-icon"})]),y("div",ge,[d(n,{style:{padding:"0",flex:"1"},modelValue:x(R).slippage,"onUpdate:modelValue":l[15]||(l[15]=e=>x(R).slippage=e),border:!1,"input-align":"right",type:"number",label:"",placeholder:"50"},null,8,["modelValue"]),ke]),y("button",{class:"clickable",onClick:l[16]||(l[16]=e=>el(1)),type:"button"},[d(o,{name:"plus",class:"btn-icon"})])])],64)),x(Ne)?(h(),A(s,{key:3,class:"submit-btn",type:"primary",color:"#999",block:"",loading:x(De),onClick:w(Ze,["stop"])},{default:b((()=>[O($(e.$t("cancelTerminateOrder")),1)])),_:1},8,["loading","onClick"])):(h(),A(s,{key:2,class:"submit-btn",type:"primary","native-type":"submit",block:"",loading:x(De),disabled:x(Ge)},{default:b((()=>[O($(x(Xe)||e.$t("followOrderImmediately")),1)])),_:1},8,["loading","disabled"]))])),_:1}),d(c,{show:x(ll),"onUpdate:show":l[21]||(l[21]=e=>f(ll)?ll.value=e:ll=e),closeable:"",round:""},{default:b((()=>[y("div",ze,[y("h3",Le,$(e.$t("followOrderConfirm")),1),y("ul",Pe,[y("li",Se,"1, "+$(e.$t("followOrderConfirmTips1")),1),y("li",Ie,"2, "+$(e.$t("followOrderConfirmTips2")),1),y("li",Re,"3, "+$(e.$t("followOrderConfirmTips3")),1),y("li",He,"4, "+$(e.$t("followOrderConfirmTips4",{amount:x(F)(x(nl).tokenAmount,2),symbol:x(Y).symbol,ethAmount:x(F)(x(nl).ethAmount,2),uAmount:x(F)(x(nl).uAmount,2),native:"ETH"})),1)]),d(s,{type:"primary",class:"max-h-36px",block:"",loading:x(De),onClick:w(Ke,["stop"])},{default:b((()=>[O($(e.$t("confirmAndApprove")),1)])),_:1},8,["loading","onClick"])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-fb93a742"]]))}}}));
